<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ohnotomsutton</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Fuzzy+Bubbles:wght@400;700&display=swap" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <style>
body {
    font-family: monospace;
    margin: 10px; 
    padding: 0;
    line-height: 1.3; 
    color: #000; 
    background-color: #fff;
}

container {
    display: block;
    max-width: 640px; 
    margin: 10px auto; 
    padding: 0; 
}

header {
    margin-bottom: 1rem;
	font-family: 'Fuzzy Bubbles';
}

header p {
    font-size: 2rem;
    font-weight: normal; 
    margin: 0;
}

main p {
    margin: 0.75rem 0;
    font-size: 1rem;
}

main > br {
    display: none; 
}

main > p 
{
    font-size: 1.1rem;
    font-weight: bold;
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
}

.table-wrapper {
    overflow-x: auto;
    margin-bottom: 1rem;
}

table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.7rem; 
}

thead {
    border-bottom: 1px solid #000; 
}

th, td {
    padding-right: 0.5rem;
    padding-left: 0.5rem;
    padding-top: 0.2rem;
    padding-bottom: 0.2rem;
    text-align: left;
    border-bottom: 1px solid #ccc;
}

th {
    font-weight: normal;
}

tbody tr:first-child td {
    border-top: none
}

a {
    color: #0000ff;
    text-decoration: underline;
}

a:hover {
    
}

footer {
    text-align: left;
    border-top: none; 
}

footer a {
    font-weight: normal;
    color: #0000ff;
}

main > p:last-of-type { 
    text-align: left; 
    font-style: normal; 
    color: #333;
    margin-top: 1.5rem;
}

#table02 a {
    color: #0000ff; 
}

.image-gallery {
    display: flex; 
	margin: auto;
    flex-wrap: wrap;
    gap: 10px; 
    margin-bottom: 1.5rem;
}

.image-gallery img {
    width: 150px;
    height: 150px; 
    border: 1px solid #ccc;
  }

pre[class*="language-"],
code[class*="language-"] {
    white-space: pre-wrap !important;
}
.token.comment {
    color: #cccccc !important;
}
		
    </style>
</head>
<body>
    <container>
    <header>
        <p><span style="color: #ccc">ohno</span>tomsutton</p>
    </header>
    <main>
    <p>TUTORIAL: EASY SNAPPING TOOL FOR MAYA</p>
	<blockquote>
	This code lets a user save an object's coordinates with a double-click of a shelf button, and then using a single click, apply those coordinates. This can snap two objects together, or let you snap an object to the same position across several frames; it can be useful for locking down feet or hands while animating, or for positioning before applying constraints. <br /><br />
	First we need to save the position and rotation we want to snap to. Create a shelf button and in the Shelf Editor, put this code in the "Double Click Command" tab for that button.
	</blockquote>
	<pre><code class="language-mel">
global proc storeSnapValues() {
    global float $storedT[]; 
    global float $storedR[];
    string $sourceObj[] = `ls -sl`;
    if (size($sourceObj) == 0) {
        warning("No object selected!");
        return;
    }
    string $objName = $sourceObj[0];
    $storedT = `xform -query -worldSpace -translation $objName`;
    $storedR = `xform -query -worldSpace -rotation $objName`;
    print("Transform stored from: " + $objName + "\n");
}
storeGlobalTransform();
	</code></pre>
<blockquote>The code is broken down in the section below.</blockquote>
    <pre><code class="language-mel">
// We need a function (a chunk of code) we can call anytime from anywhere (like from a single click on the same button), not just in the code we have here. 
// We can use "proc" to define a function. Calling it "global" makes it accessible from any other code we decide to run from anywhere in Maya.
		
global proc storeSnapValues() { //This creates the function called "storeSnapValues"
		
    global float $storedT[]; // Global variable for Translation (T) 
    global float $storedR[]; // Global variable for Rotation (R)

	// We need to store the values as "global" so they can also be referenced from anywhere. 
	// For our purposes, just know that "float" is a type of variable, a number that has a decimal place. It is different from a "string" or an "interger" or "int", which are other data types.
	// The next part is "$storedT" and "$storedR". Leading with "$" tells Maya that this is the name of the variable. 
	// The "[]" at the end tells Maya there are going to be MULTIPLE values stored inside this variable. This changes it from a single float to an "array" of floats.

	// We're going to have to get which object we currently have selected in order to save its Translate and Rotate values.
		
	string $sourceObj[] = `ls -sl`;
	
	// This is a value type called a "string". Strings are typically bits of text, names, or labels. You can also have an array of strings.
	// The backticks (`) run the command inside and take the returned value and assign it to our string or variable.
	// 'ls -sl' is short for "list selection". It creates a list of everything you have selected, it runs a command that creates the list, and then returns each item in that list to be the value of each string in our array.

	// If the size of the array we just made is zero, there's nothing in it. We show a little warning and then end the function with "return;". There's no need to keep running code if we don't have anything selected.
    if (size($sourceObj) == 0) {
        warning("No object selected!");
        return;
    }

	// To simplify the next few lines of code, we're going to save the value of the FIRST OBJECT in our list (even if its only one object, its fine).
	// The first item is actually indexed with a 0. So we save the "0th" string in the array to a single string.
    string $objName = $sourceObj[0];

	// The float arrays we made before now need to get their values from the saved object.
    $storedT = `xform -query -worldSpace -translation $objName`;
    $storedR = `xform -query -worldSpace -rotation $objName`;
	// Here we see an "xform" command, paired with the tags "-query -worldSpace -translation". It "queries" or asks maya the transform (shortened to xform) the objects worldSpace translation or rotation. The values are then saved to our array of strings for each.
	
    print("Transform stored from: " + $objName + "\n");
	// A print command just gives us a little heads up as to what we actually just did.
}

storeSnapValues();
//Then we call the function to run the code.
    </code></pre>
		
	<blockquote>Now, when we select a different object, we need to be able to apply those values with a single click. Under the "Command" tab for our button, put this code.</blockquote>
	<pre><code class="language-mel">
global proc applySnapValues() {
    global float $storedT[]; // Must declare as global here too!
    global float $storedR[]; // Must declare as global here too!
    
    string $targetObj[] = `ls -sl`; // Fixed variable name
    
    if (size($targetObj) == 0) {
        warning("No object selected!");
        return;
    }
    
    if (size($storedT) == 0 || size($storedR) == 0) {
        warning("No transform data stored! Double-click first to store.");
        return;
    }
    
    string $objName = $targetObj[0]; // Using correct variable
    xform -worldSpace -translation $storedT[0] $storedT[1] $storedT[2] $objName;
    xform -worldSpace -rotation $storedR[0] $storedR[1] $storedR[2] $objName;
    print("Transform applied to: " + $objName + "\n");
}

applySnapValues() ;
	</code></pre>

	<blockquote>The code is broken down in the section below.</blockquote>
	
		
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-mel.min.js"></script>
	</main>
    <footer>
<br/>
<div style="text-align: center;">
<span><a href="https://linktr.ee/ohnotomsutton">LINKS</a></span>
<br />
<span>Tom Sutton, 2025</span>
</div>

<br/>
<br/>
    </footer>
    </container>
</body>
</html>
